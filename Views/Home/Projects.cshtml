@using Microsoft.AspNetCore.Mvc.Localization
@using System.Globalization
@inject IHtmlLocalizer<MermerSitesi.SharedResource> Localizer
@model IEnumerable<MermerSitesi.Models.ProjectItem>

@{
    ViewData["Title"] = Localizer["Projects"];
    var currentCulture = CultureInfo.CurrentCulture.Name;
}

<div class="page-header project-header d-flex align-items-center justify-content-center mb-5"
    style="background-image: url('/images/Projects.png'); background-size: cover; height: 400px; position: relative;">
    <div class="text-center text-white position-relative z-index-1">
        <h1 class="display-3 fw-bold" style="font-family: 'Times New Roman', serif; letter-spacing: 3px;">
            @Localizer["Projects"]
        </h1>
        <div class="divider mx-auto bg-white mt-3" style="width: 80px; height: 3px;"></div>
        <p class="mt-3 lead text-uppercase" style="letter-spacing: 2px; font-size: 0.9rem;">
            @Localizer["ProjectsSubtitle"]
        </p>
    </div>
    <div class="overlay"
        style="position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5);"></div>
</div>

<div class="container mb-5">
    <div class="row g-4">

        @if (Model == null || !Model.Any())
        {
            <div class="col-12 text-center py-5">
                <div class="alert alert-light border shadow-sm">
                    <h4 class="text-muted">@Localizer["NoProjectsYet"]</h4>
                </div>
            </div>
        }
        else
        {
            @foreach (var item in Model)
            {
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm hover-card overflow-hidden">
                        <div class="position-relative" style="height: 300px;">
                            @if (!string.IsNullOrEmpty(item.ImageUrl))
                            {
                                <img src="@item.ImageUrl" class="w-100 h-100 object-fit-cover" alt="@item.TitleTr">
                            }
                            else
                            {
                                <img src="https://via.placeholder.com/400x300?text=R%26Y+Stone"
                                    class="w-100 h-100 object-fit-cover">
                            }
                            @* Ülke Bilgisi Resmin Üstüne Şık Bir Etiket Olarak Geliyor *@
                            <div class="position-absolute top-0 end-0 m-3">
                                <span class="badge bg-white text-dark rounded-0 px-3 py-2 shadow-sm text-uppercase fw-bold"
                                    style="letter-spacing: 1px; font-size: 0.7rem;">
                                    <i class="fas fa-map-marker-alt text-danger me-1"></i> @item.Country
                                </span>
                            </div>
                        </div>

                        <div class="card-body p-4 text-center">
                            <h5 class="card-title fw-bold mb-0"
                                style="font-family: 'Montserrat', sans-serif; letter-spacing: 1px;">
                                @if (currentCulture.StartsWith("tr"))
                                {
                                    @item.TitleTr
                                }
                                else if (currentCulture.StartsWith("nl"))
                                {
                                    @item.TitleNl
                                }
                                else
                                {
                                    @item.TitleEn
                                }
                            </h5>
                            <div class="mt-3">
                                <div style="width: 40px; height: 2px; background: #c9a961; margin: 0 auto;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }

    </div>
</div>

<style>
    .hover-card {
        transition: transform 0.4s ease, shadow 0.4s ease;
        cursor: pointer;
    }

    .hover-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1) !important;
    }

    .object-fit-cover {
        object-fit: cover;
    }
</style>